<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title>SOTM Events 2017</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.css' rel='stylesheet' />
    <link href='css/style.css' rel='stylesheet' />
</head>
<body>
<div id='map'></div>
<div id='header-box'>
<div id='header'>
  <h1>State of the Map events across the world</h1>
  <h6>Hover for more details, and click to view the official website</h6>
</div>
</div>
<script>
mapboxgl.accessToken = 'pk.eyJ1IjoicmFzYWd5IiwiYSI6ImNqNHR0cjMyaTA3NDUzM211c2hsM3draG8ifQ.Ke3QD4Grwe1ZlDPJn37Ntg';
var geojson = {
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "name": "HOT Summit 2017",
        "location": "Ottawa, Canada",
        "url": "http://summit.hotosm.org/",
        "date": "Sep 14th – Sep 15th",
        "logo": "HOT-Canada.png",
        "zoom": 19
      },
      "geometry": {
        "type": "Point",
        "coordinates": [-75.72800, 45.40988]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "State of the Map",
        "location": "Fukushima, Japan",
        "url": "http://2017.stateofthemap.org/",
        "date": "Aug 18th – Aug 20th",
        "logo": "SOTM-Japan.svg",
        "zoom": 19
      },
      "geometry": {
        "type": "Point",
        "coordinates": [139.93473, 37.48583]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "SotM France",
        "location": "Avignon, France",
        "url": "https://openstreetmap.fr/sotmfr2017",
        "date": "Jun 2nd – Jun 4th",
        "logo": "SOTM-France.png",
        "zoom": 18
      },
      "geometry": {
        "type": "Point",
        "coordinates": [4.81901, 43.95009]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "SotM Africa",
        "location": "Kampala, Uganda",
        "url": "https://sotmafrica.org/",
        "date": "Jul 8th – Jul 10th",
        "logo": "SOTM-Uganda.png",
        "zoom": 17
      },
      "geometry": {
        "type": "Point",
        "coordinates": [32.5608, 0.3357]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "SotM Asia",
        "location": "Kathmandu, Nepal",
        "url": "http://stateofthemap.asia/",
        "date": "Sept 23rd – Sept 24th",
        "logo": "SOTM-Nepal.png",
        "zoom": 18
      },
      "geometry": {
        "type": "Point",
        "coordinates": [85.35953, 27.77449]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "SotM US",
        "location": "Boulder, Colorado",
        "url": "https://2017.stateofthemap.us/",
        "date": "Oct 19th – Oct 22nd",
        "logo": "SOTM-USA.svg",
        "zoom": 17
      },
      "geometry": {
        "type": "Point",
        "coordinates": [-105.27241, 40.00737]
      }
    },

    {
      "type": "Feature",
      "properties": {
        "name": "FOSS4G + SotM Argentina",
        "location": "Buenos Aires",
        "url": "http://www.foss4g-ar.org/",
        "date": "Oct 23rd – Oct 28th",
        "logo": "SOTM-Argentina.svg",
        "zoom": 18
      },
      "geometry": {
        "type": "Point",
        "coordinates": [-58.44037, -34.57165]
      }
    },
    {
      "type": "Feature",
      "properties": {
        "name": "SotM LatAm",
        "location": "Lima, Peru",
        "url": "http://state.osmlatam.org/",
        "date": "Nov 29th – Dec 2nd",
        "logo": "SOTM-Peru.png",
        "zoom": 19
      },
      "geometry": {
        "type": "Point",
        "coordinates": [-77.08154, -12.05819]
      }
    }
  ]
};

var map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/light-v9',
  center: [5, 20],
  zoom: 0.9,
  hash: true,
  dragRotate: false,
  touchZoomRotate: false,
});

// add markers to map
geojson.features.forEach(function(marker) {
  // create a DOM element for the marker
  var el = document.createElement('div');
  el.className = 'marker';
  el.innerHTML = '<a href="' + marker.properties.url + '" target="_blank" rel="noopener"><div class="item logo-box"><img src="logos/' + marker.properties.logo + '" style="margin-right: 0px;"/></div>' +
    '<div class="item details"><h2>' + marker.properties.name + '</h2>' +
    '<div class="row"><i>' + marker.properties.location + '</i>' +
    '<div class="row">' + marker.properties.date + '</div>' +
    '</div></a>';
  // add marker to map
  new mapboxgl.Marker(el, {
      offset: [6, -33]
    })
    .setLngLat(marker.geometry.coordinates)
    .addTo(map);
});
</script>

</body>
</html>
